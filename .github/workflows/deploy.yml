name: Trigger action for GOV.UK_co-cyber-security-external

on:
  workflow_dispatch:
  push:
    branches:    
      - 'main'
    paths:
      - 'security.txt'
      - 'thanks.txt'
  schedule:
     - cron: "0 2 * * MON-FRI" # Runs at 02:00 UTC
      workflow_dispatch:
jobs:
 deploy-to-co-cyber-security-external:
  # Trigger makefile for co-cyber-security-external
    runs-on: ubuntu-latest
    # Steps represent a sequence of tasks that will be triggered and executed  as part of the job
    steps:
       - name: Show workflow_run
    env:
      co-cyber-security-external
      name: Deploy to GOV.UK co-cyber-security-external
      defaults:
    run:
        shell: bash
    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - name: Checkout
      uses: actions/checkout@v2
    - name: Configure AWS Credentials
      uses: aws-actions/configure-aws-credentials@v1
      with:
     role-to-assume: arn:aws:iam::576485064911:role/github_actions_role
     role-session-name: Github
     aws-region: ${{ env.AWS_REGION }}
    
       - name: Deploy and update makefile
        path: main
    - run: |
        cd main/
      run: make deploy
